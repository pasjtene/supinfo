{# add navigation current nav mark #}
{% set route = app.request.get('_route') %}
{% set baseRoute = app.request.baseUrl %}

<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
        {% block title %} Funglobe  {% endblock %}
    </title>


    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=yes" />
    <meta name = "author" content = "contact@funglobe.com (assistance de funglobe en ligne)" />
    <meta name="copyright" content="@ funglobe.com (tous  droits reservés)" />

    <!-- Responsive -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- block pour la traduction -->
    {% block meta %}

    {% endblock %}

    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- traduction  -->
    <link rel="alternate" href="https://www.funglobe.com/fr/" hreflang="fr"/>
    <link rel="alternate" href="https://www.funglobe.com/en/" hreflang="en"/>




    {% block stylesheets %}
        <!-- Bootstrap 4 -->
        <link rel="stylesheet" href="{{ asset('plugin/bootstrap/css/bootstrap.min.css') }}">

        <link rel="stylesheet" href="{{ asset('plugin/jquery-ui-1.12.1/jquery-ui.min.css') }}">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="{{ asset('plugin/font-awesome/font-awesome.min.css') }}">
        <!-- Ionicons -->
        <link rel="stylesheet" href="{{ asset('plugin/ionicons/ionicons.min.css') }}">

        <link rel="stylesheet" href="{{ asset('plugin/datepicker/datepicker.css') }}">

        <!-- funglobe CSS -->
        <link rel="stylesheet" href="{{ asset('data/css/master.css') }}">
        <!-- logo -->
        <link rel="icon" type="image/x-icon" href="{{ asset('logo.ico') }}" />

        <!-- Stylesheets for user -->
        {% block mycss %}{% endblock %}
    {% endblock %}

</head>
<body>


<!-- baground en  cas devenement  dans le front-offcie -->
<div id="bg-action">
    <div id="loading-action" class="row">
        <div class="col-12 text-center">
            <img src="{{ asset('data/img/loading2.gif') }}" alt="">
        </div>
    </div>
</div>

<!-- baground en  cas d"evenement -->
<div id="bg">
    <div id="loading" class="row">
        <div class="col-12 text-center">
            <img src="{{ asset('data/img/loading3.gif') }}" alt="">
            <div id="bloc_message" class='text-info'>

            </div>
            <div id="bg-notification">
                <div id="bg-success">
                    <img src="{{ asset('data/img/success1.png') }}" alt="">
                </div>
                <div id="bg-error">
                    <img src="{{ asset('data/img/error.png') }}" alt="">
                </div>
                <p></p>
            </div>
        </div>
    </div>
</div>

<div id="bg-photos-globale">
    <div id="bg-photos-child" class="row  text-center justify-content-center">
        <div class="col-8 align-self-center">
            <div id="photo-carouserie" class="carousel slide " data-ride="carousel" >
                <div class="carousel-inner" role="listbox">
                    {# <div class="carousel-item active">
                         <img class="d-block img-fluid" src="{{ asset('data/img/image3.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block" style="">
                             <h3>1/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job1.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>2/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item text-center col-12">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job2.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>3/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item ">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job3.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>4/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item ">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job4.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>5/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item ">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job5.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>6/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item ">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job6.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>7/8</h3>
                         </div>
                     </div>
                     <div class="carousel-item ">
                         <img class="d-block img-fluid" src="{{ asset('data/img/job7.jpg') }}" alt="First slide">
                         <div class="carousel-caption d-none d-md-block">
                             <h3>8/8</h3>
                         </div>
                     </div>
                     #}
                </div>
                <a class="carousel-control-prev propagation" href="#photo-carouserie" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next propagation" href="#photo-carouserie" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>

</div>


<!-- block  reserv�  pour l'entete -->
{% block header %}{% endblock %}
<!-- reserv� pour les notifications -->
{% block flash %}

    {% for flashMessage in app.session.flashbag.get('notice') %}
        <div>
            {{ flashMessage }}
        </div>
    {% endfor %}

    {% for flashMessage in app.session.flashbag.get('error') %}
        <div>
            {{ flashMessage }}
        </div>
    {% endfor %}

{% endblock %}
<div id="body">
    <!-- reserv� pour le contenu  de la page -->
    {% block content %}

    {% endblock %}

    <!-- reserv� pour le footer de la page-->
    {% block footer %}

    {% endblock footer %}
</div>

{% set currentPath = path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')) %}
<script>
    // get locale
    locale = "{{ app.request.locale }}";
    pathBase = location.host; //"{{ app.request.baseUrl }}";
    // get route
    route = "{{ route }}";
    // url  courant
    url = "{{ currentPath }}";
</script>



{% block javascripts %}
    <!-- faciliter la manipulation du  controlleur dans le js  -->

    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', { callback: 'fos.Router.setData' }) }}"></script>

    <!-- js-translation -->
    <script src="{{ asset('bundles/bazingajstranslation/js/translator.min.js') }}"></script>
    <script src="{{ url('bazinga_jstranslation_js') }}"></script>

    <!-- jQuery 3.1 -->
    <script src="{{ asset('plugin/jQuery/jquery.js') }}"></script>
    <script src="{{ asset('plugin/parallax/parallax.js') }}"></script>




    <!-- Tether -->
    <script src="{{ asset('plugin/tether/tether.js') }}"></script>

    <!-- Bootstrap 4 -->
    <script src="{{ asset('plugin/bootstrap/js/bootstrap.js') }}"></script>

    <!-- Font Awesome -->

    <script src="{{ asset('plugin/datepicker/bootstrap-datepicker.js') }}"></script>
    <script src="{{ asset('plugin/bootbox/bootbox.min.js') }}"></script>
    <script src="{{ asset('plugin/jquery-ui-1.12.1/jquery-ui.min.js') }}"></script>

    <!--script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script -->

    {#
     <script src="{{ asset('plugin/confirm-custom-labels.js') }}"></script>
      <script src="{{ asset('plugin/bootbox/alert-simple.js') }}"></script>
     <script src="{{ asset('plugin/bootbox/alert-callback.js') }}"></script>
     <script src="{{ asset('plugin/bootbox/alert-custom-label.js') }}"></script>
     <script src="{{ asset('plugin/bootbox/confirm-simple-label.js') }}"></script>
    #}




    <!-- Javascript for user -->

    <script>

        // Quelques informations sur l'utilisateur connecté
        {% if app.user!=null %}
        var currentUser = {
            id : '{{ app.user.id }}',
            token : '{{ app.user.token }}',
            ip: '{{ app.user.ip }}',
            name : '{{ app.user.lastname }}' + ' ' + '{{ app.user.firstname }}',
            country: '{{ app.user.country }}'
        }

        {% endif %}

        $('#bg-photos-globale .carousel').carousel({
            interval: false
        });

        {#

        /* geolocation: {
                            ipAddress : '{{ app.user.geolocation.ipAddress }}',
                            countryName : '{{ app.user.geolocation.countryName }}',
                            countryCode : '{{ app.user.geolocation.countryCode }}',
                            regionName : '{{ app.user.geolocation.regionName }}',
                            cityName : '{{ app.user.geolocation.cityName }}'
                         }*/

        #}
        //recuperer la liste des pays et  leurs codes
        var  countryList = [];
        var pathCountry = {% if app.request.locale=="fr" %} '{{ asset("dist/country.json") }}' {% else %} '{{ asset("dist/country-en.json") }}' {% endif %};
        $.getJSON(pathCountry, function(data){
            $.each(data,function(index,vaue){
                countryList.push({"code": index, "value":vaue});
            });
        });

        // le chemin par defaut pour le projet
        baseRoute = Routing.generate('main_homepage',{_locale:locale},true);
    </script>

    <!-- Funglobe js -->

    <script src="{{ asset('data/js/supinfo.min.js') }}"></script>

    <!--
        how to use translations to js

        // the translated message or undefined
        Translator.trans('key')

        // the translated message or undefined
        Translator.trans('key', {}, 'DOMAIN_NAME');

        // the translated message or undefined
        Translator.transChoice('key', 1, {}, 'DOMAIN_NAME');

        // will replace each "%foo%" in the message by "bar".
        Translator.trans('key', { "foo" : "bar" }, 'DOMAIN_NAME');

        // will replace each "%foo%" in the message by "bar".
        Translator.transChoice('key', 123, { "foo" : "bar" }, 'DOMAIN_NAME');

     -->

    <!-- solution  pour le modale (bootbox) -->

    <script>
        // comment utiliser un alert
        //bootbox.alert("Custom label text!", function(result){});
        //comment utiliser confirm
        /* bootbox.confirm("Custom label text!", function(result){
         if(result){
         console.log("ok ");
         }
         else{
         console.log("cancel")
         }
         });
         */


       function initNotification()
       {
           if (window.Notification && Notification.permission !== "granted") {
               Notification.requestPermission(function (status) {
                   if (Notification.permission !== status) {
                       Notification.permission = status;
                   }
               });
           }
       }

        var button = $('#notifie');

        button.click(function () {
                notifyMe("je suis un simple test de notification");
        });

        function notifyMe(message) {
            // Voyons si le navigateur supporte les notifications
            if (!("Notification" in window)) {
                console.log("Ce navigateur ne supporte pas les notifications desktop");
            }

            // Voyons si l'utilisateur est OK pour recevoir des notifications
            else if (Notification.permission === "granted") {
                // Si c'est ok, créons une notification
                var notification = new Notification(message);
            }

            // Sinon, nous avons besoin de la permission de l'utilisateur
            // Note : Chrome n'implémente pas la propriété statique permission
            // Donc, nous devons vérifier s'il n'y a pas 'denied' à la place de 'default'
            else if (Notification.permission !== 'denied') {
                Notification.requestPermission(function (permission) {

                    // Quelque soit la réponse de l'utilisateur, nous nous assurons de stocker cette information
                    if(!('permission' in Notification)) {
                        Notification.permission = permission;
                    }

                    // Si l'utilisateur est OK, on crée une notification
                    if (permission === "granted") {
                        var notification = new Notification(message);
                    }
                });
            }
            // Comme ça, si l'utlisateur a refusé toute notification, et que vous respectez ce choix,
            // il n'y a pas besoin de l'ennuyer à nouveau.
        }
</script>

    {% block myjs %}

    {% endblock %}
    {% if app.environment == 'dev' %}
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
    {% endif %}

{% endblock %}

</body>
</html>
